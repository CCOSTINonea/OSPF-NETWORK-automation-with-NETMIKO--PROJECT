from netmiko import ConnectHandler
cisco_device ={
    'device_type':'cisco_ios',
    'host':'10.1.1.10',
    'username':'u1',
    'password':'admin',
    'port':22,
    'secret':'cisco',
    'verbose':True
}
mask_s_w = {
    32: ["255.255.255.255", "0.0.0.0"],
    31: ["255.255.255.254", "0.0.0.1"],
    30: ["255.255.255.252", "0.0.0.3"],
    29: ["255.255.255.248", "0.0.0.7"],
    28: ["255.255.255.240", "0.0.0.15"],
    27: ["255.255.255.224", "0.0.0.31"],
    26: ["255.255.255.192", "0.0.0.63"],
    25: ["255.255.255.128", "0.0.0.127"],
    24: ["255.255.255.0", "0.0.0.255"],
    23: ["255.255.254.0", "0.0.1.255"],
    22: ["255.255.252.0", "0.0.3.255"],
    21: ["255.255.248.0", "0.0.7.255"],
    20: ["255.255.240.0", "0.0.15.255"],
    19: ["255.255.224.0", "0.0.31.255"],
    18: ["255.255.192.0", "0.0.63.255"],
    17: ["255.255.128.0", "0.0.127.255"],
    16: ["255.255.0.0", "0.0.255.255"],
    15: ["255.254.0.0", "0.1.255.255"],
    14: ["255.252.0.0", "0.3.255.255"],
    13: ["255.248.0.0", "0.7.255.255"],
    12: ["255.240.0.0", "0.15.255.255"],
    11: ["255.224.0.0", "0.31.255.255"],
    10: ["255.192.0.0", "0.63.255.255"],
    9: ["255.128.0.0", "0.127.255.255"],
    8: ["255.0.0.0", "0.255.255.255"],
    7: ["254.0.0.0", "1.255.255.255"],
    6: ["252.0.0.0", "3.255.255.255"],
    5: ["248.0.0.0", "7.255.255.255"],
    4: ["240.0.0.0", "15.255.255.255"],
    3: ["224.0.0.0", "31.255.255.255"],
    2: ["192.0.0.0", "63.255.255.255"],
    1: ["128.0.0.0", "127.255.255.255"],
    0: ["0.0.0.0", "255.255.255.255"]
}
connection = ConnectHandler(**cisco_device )
nr=int(input('How many interfaces do you want to configure?'))
list_int=[]
list_ip_commands=[]
for i in range(0,nr):
    interface = input("What's the interface?: ")
    ip = input("What's the IP address?: ")
    mask = int(input("What's the subnet mask? ex: 24 means 255.255.255.0 or /24: "))
    list_int.append(f'int {interface}')
    list_int.append(f'ip add {ip} {mask_s_w[mask][0]}' )
    list_int.append(f'no sh')

commands = ['conf t'] + list_int + ['end']
connection.send_config_set(commands)
show_ip_int=connection.send_command('sh ip int br')
connection.send_command('wr')
print(show_ip_int)

connection.disconnect()


